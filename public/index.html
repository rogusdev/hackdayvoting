<html>
    <head>
        <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
        <title>Hack Day Projects Voting</title>

<!--
either run in this same dir:
python3 -m http.server 3000
then go to:
http://localhost:3000/

or also run the server with yarn/npm start which serves this file

Make sure no ALLOWED_DOMAIN in env for localdev server to accept google token!


https://developers.google.com/identity/sign-in/web/reference

https://developers.google.com/identity/sign-in/web/sign-in
https://developers.google.com/identity/sign-in/web/backend-auth
https://developers.google.com/identity/sign-in/web/people

https://github.com/googleapis/google-api-dotnet-client
https://developers.google.com/api-client-library/dotnet/get_started
https://developers.google.com/api-client-library/

https://github.com/google/google-api-javascript-client
https://developers.google.com/api-client-library/javascript/samples/samples#authorizing-and-making-authorized-requests



        <meta name="google-signin-scope" content="profile email">

        <meta name="google-signin-client_id"
            content="861609598303-o00osplh8n4jidur6mr6931c8sjikjuu.apps.googleusercontent.com" />
-->
        <script>

const CLIENT_ID = "861609598303-o00osplh8n4jidur6mr6931c8sjikjuu.apps.googleusercontent.com"
const SERVER_URL_BASE = "http://localhost:3000/"
const HOSTED_DOMAIN = "example.com"

const ALWAYS_AVAILABLE_CATEGORIES = ['Slogan']

function newState () {
    return {
        categories: [],
        projects: [],
        votes: [],
        reqs: []
    }
}

let state = newState()

function googleInit () {
    console.log("google init");
    gapi.load('auth2', () => {
        gapi.auth2.init({
            client_id: CLIENT_ID,
            fetch_basic_profile: true,
            //hosted_domain: HOSTED_DOMAIN,
            ux_mode: "redirect"
        }).then(() => {
            console.log("google auth SUCCESS")
            let googleAuth = gapi.auth2.getAuthInstance()
            googleAuth.isSignedIn.listen(updateGoogleSigninStatus)
            updateGoogleSigninStatus(googleAuth.isSignedIn.get())
        }).catch(err => {
            console.log("google auth FAIL")
            console.log(err)
        })
    })
}

function updateGoogleSigninStatus (isSignedIn) {
    console.log("google signin status: " + isSignedIn)
    let showNoAuthElems = true
    let showYesAuthElems = true
    let form = document.querySelector("form#new_project")
    clearNewProject(form)

    if (isSignedIn) {
        showYesAuthElems = false
        let googleUser = gapi.auth2.getAuthInstance().currentUser.get()
        console.log(googleUser)
        console.log(googleUser.getAuthResponse())
        state.id_token = googleUser.getAuthResponse().id_token
        console.log('Token: ' + state.id_token)

        let profile = googleUser.getBasicProfile()
        console.log(profile)
        console.log('ID: ' + profile.getId()) // Do not send to your backend! Use an ID token instead.
        console.log('Name: ' + profile.getName())
        console.log('Image URL: ' + profile.getImageUrl())
        console.log('Email: ' + profile.getEmail()) // This is null if the 'email' scope is not present.
        state.id = profile.getId()
        state.email = profile.getEmail()
        state.isAdmin = (state.email == "admin@example.com")
        showHideAdminTools()

        let helloUserElem = document.getElementById("hello-user")
        helloUserElem.getElementsByTagName("img")[0]
            .setAttribute("src", profile.getImageUrl())
        helloUserElem.getElementsByTagName("span")[0]
            .textContent = profile.getName()

        getState()
    } else {
        clearRefresh()
        showNoAuthElems = false
        console.log("No google user!")
        state = newState()
    }
    Array.from(document.getElementsByClassName("no-auth"))
        .forEach(e => e.hidden = showNoAuthElems)
    Array.from(document.getElementsByClassName("yes-auth"))
        .forEach(e => e.hidden = showYesAuthElems)
}

// https://developers.google.com/identity/sign-in/web/build-button
function googleSignIn () {
    console.log("google sign IN")
    let auth2 = gapi.auth2.getAuthInstance()
    auth2.signIn().then(googleUser => {
        console.log('User signed in.')
        console.log(googleUser)
    }).catch(err => {
        console.log("signin FAILED")
        console.log(err)
    })
}

function googleSignOut () {
    console.log("google sign OUT")
    let auth2 = gapi.auth2.getAuthInstance()
    auth2.signOut().then(function () {
        console.log('User signed out.')
    })
}

function showHideAdminTools () {
    let adminOnlyDiv = document.querySelectorAll("div.admin_only")
    let display = state.isAdmin ? "block" : "none"
    adminOnlyDiv.forEach(el => el.style.display = display)
}

function setCategoriesInProjectsHeader () {
    let allProjectsHeaderRowEl = document.querySelector("#all_projects table tr")
    let headerCells = [
        'Name',
        'Description',
        'Members',
        'Slogan',
        'Category',
        '--Votes--'
    ]
    for (let category of state.categories) {
        headerCells.push(category.name)
    }
    let newHeaderRowEl = document.createElement("tr")
    for (let name of headerCells) {
        let nameCellEl = document.createElement("th")
        nameCellEl.appendChild(document.createTextNode(name))
        newHeaderRowEl.appendChild(nameCellEl)
    }
    allProjectsHeaderRowEl.parentNode.replaceChild(newHeaderRowEl, allProjectsHeaderRowEl)
}

function setCategoriesInNewProjectCategoryDropdown () {
    let newProjectCategoryDropdownEl =
        document.querySelector("form#new_project table select[name='categoryId']")

    while (newProjectCategoryDropdownEl.firstChild) {
        newProjectCategoryDropdownEl.removeChild(newProjectCategoryDropdownEl.firstChild)
    }

    const emptyCategory = [{ name: "--", id: "" }]
    for (let category of emptyCategory.concat(state.categories)) {
        if (ALWAYS_AVAILABLE_CATEGORIES.includes(category.name)) continue

        let categoryOptionEl = document.createElement("option")
        categoryOptionEl.setAttribute("value", category.id)
        categoryOptionEl.appendChild(document.createTextNode(category.name))
        newProjectCategoryDropdownEl.appendChild(categoryOptionEl)
    }
}

function createProjectRowEl (project) {
    let rowEl = document.createElement("tr")
    rowEl.setAttribute("projectId", project.id)
    let nameCellEl = document.createElement("td")
    nameCellEl.appendChild(document.createTextNode(project.name || ""))
    let descriptionCellEl = document.createElement("td")
    descriptionCellEl.appendChild(document.createTextNode(project.description || ""))
    let membersCellEl = document.createElement("td")
    membersCellEl.appendChild(document.createTextNode(project.members || ""))
    let sloganCellEl = document.createElement("td")
    sloganCellEl.appendChild(document.createTextNode(project.slogan || ""))
    let categoryCellEl = document.createElement("td")
    let category = state.categories.find(category => category.id == project.categoryId)
    categoryCellEl.appendChild(document.createTextNode(category.name || ""))
    let idCellEl = document.createElement("td")
    idCellEl.appendChild(document.createTextNode(project.id))

    rowEl.appendChild(nameCellEl)
    rowEl.appendChild(descriptionCellEl)
    rowEl.appendChild(membersCellEl)
    rowEl.appendChild(sloganCellEl)
    rowEl.appendChild(categoryCellEl)
//    rowEl.appendChild(idCellEl)

    return rowEl
}

function upsertYourProjectRow (project) {
    let rowEl = createProjectRowEl(project)

    let removeButtonEl = document.createElement("button")
    removeButtonEl.appendChild(document.createTextNode('Remove'))
    removeButtonEl.onclick = () => deleteProject(project.id)
    let removeCellEl = document.createElement("td")
    removeCellEl.appendChild(removeButtonEl)
    let editButtonEl = document.createElement("button")
    editButtonEl.appendChild(document.createTextNode('Edit'))
    editButtonEl.onclick = () => {
        let form = document.querySelector("form#new_project")
        form.elements['name'].value = project.name || ""
        form.elements['description'].value = project.description || ""
        form.elements['members'].value = project.members || ""
        form.elements['slogan'].value = project.slogan || ""
        form.elements['categoryId'].value = project.categoryId || ""
        form.elements['order'].value = project.order || "-1"
        form.elements['createdAt'].value = project.createdAt || ""
        form.elements['id'].value = project.id || ""
        form.querySelector("button").innerText = 'Edit'
        form.querySelector("p").innerText = 'Edit Project:'
    }
    let editCellEl = document.createElement("td")
    editCellEl.appendChild(editButtonEl)

    rowEl.appendChild(removeCellEl)
    rowEl.appendChild(editCellEl)

    let yourProjectsTableEl = document.querySelector("#your_projects table")
    let existingYourProject = yourProjectsTableEl.querySelector('tr[projectId="'+project.id+'"]')
    if (existingYourProject) {
        yourProjectsTableEl.replaceChild(rowEl, existingYourProject)
    } else {
        yourProjectsTableEl.appendChild(rowEl)
    }

    return rowEl
}

function upsertAllProjectRow (project) {
    let rowAllEl = createProjectRowEl(project)

    // add empty space for Votes separator column
    rowAllEl.appendChild(document.createElement("td"))

    for (let category of state.categories) {
        let vote = state.votes.find(vote =>
            project.id == vote.projectId && category.id == vote.categoryId && state.email == vote.authorEmail
        )

        let checkButtonEl = document.createElement("input")
        checkButtonEl.type = 'checkbox'
        checkButtonEl.checked = vote != null
        checkButtonEl.disabled =
            !ALWAYS_AVAILABLE_CATEGORIES.includes(category.name)
            && category.id != project.categoryId

        // 'var' is the absolute devil
        // https://stackoverflow.com/questions/750486/javascript-closure-inside-loops-simple-practical-example
        checkButtonEl.onclick = function () {
            if (vote) {
                deleteVote(vote.id)
            } else {
                upsertVote({
                    projectId: project.id,
                    categoryId: category.id
                })
            }
        }

        let buttonCellEl = document.createElement("td")
        buttonCellEl.appendChild(checkButtonEl)
        rowAllEl.appendChild(buttonCellEl)
    }

    addOrderButtons(rowAllEl)

    let allProjectsTableEl = document.querySelector("#all_projects table")
    let existingAllProject = allProjectsTableEl.querySelector('tr[projectId="'+project.id+'"]')
    if (existingAllProject) {
        allProjectsTableEl.replaceChild(rowAllEl, existingAllProject)
    } else {
        allProjectsTableEl.appendChild(rowAllEl)
    }

    return rowAllEl
}

function shiftProject (thisProjectRowEl, dist) {
    if (state.refresh) {
        clearRefresh()
//        alert('Stopped refresh! Remember to start it again after saving')
    }

    let thisProjectId = thisProjectRowEl.getAttribute("projectId")
    let thisProjectIndex = state.projects.findIndex(project => project.id == thisProjectId)
    if (thisProjectIndex != thisProjectRowEl.rowIndex - 1) {
        console.log(`This project index ${thisProjectIndex} and row index ${thisProjectRowEl.rowIndex} do not match for ${thisProjectId}!`)
        return
    }

    if (dist > 0 && thisProjectIndex < dist) dist = thisProjectIndex
    if (dist < 0 && thisProjectIndex >= state.projects.length + dist) dist = thisProjectIndex - state.projects.length + 1

    let otherProjectIndex = thisProjectIndex - (dist > 0 ? 1 : -1)
    let otherProjectId = state.projects[otherProjectIndex].id
    let otherProjectRowEl = thisProjectRowEl.parentNode.querySelector('tr[projectId="'+otherProjectId+'"]')
    if (otherProjectIndex != otherProjectRowEl.rowIndex - 1) {
        console.log(`Other project index ${otherProjectIndex} and row index ${otherProjectRowEl.rowIndex} do not match for ${otherProjectId}!`)
        console.log(`... for this project index ${thisProjectIndex} and row index ${thisProjectRowEl.rowIndex} of ${thisProjectId} shifting ${dist}!`)
        console.log(state.projects.map(p => p.description))
        return
    }

    let tmp = state.projects[otherProjectIndex]
    state.projects[otherProjectIndex] = state.projects[thisProjectIndex]
    state.projects[thisProjectIndex] = tmp

//    console.log(`After shift, this: ${state.projects[otherProjectIndex].id} other: ${state.projects[thisProjectIndex].id}`)

    if (dist < 0) {
        thisProjectRowEl.parentNode.insertBefore(otherProjectRowEl, thisProjectRowEl)
        if (dist < -1) shiftProject(thisProjectRowEl, dist + 1)
    }
    else if (dist > 0) {
        thisProjectRowEl.parentNode.insertBefore(thisProjectRowEl, otherProjectRowEl)
        if (dist > 1) shiftProject(thisProjectRowEl, dist - 1)
    }
}

function createOrderButton (rowAllEl, text, dist) {
    let button = document.createElement("span")
    button.appendChild(document.createTextNode(text))
    button.classList.add("order_button");
    button.onclick = () => shiftProject(rowAllEl, dist)
    return button
}

function addOrderButtons (rowAllEl) {
    let cellEl = rowAllEl.querySelector("tr td:nth-of-type(6)")
    let el = document.createElement("div")
    el.classList.add("admin_only");
    el.appendChild(createOrderButton(rowAllEl, "\u21C8", state.projects.length))
    el.appendChild(createOrderButton(rowAllEl, "\u25B2", 1))
    el.appendChild(createOrderButton(rowAllEl, "\u25BC", -1))
    el.appendChild(createOrderButton(rowAllEl, "\u21CA", -state.projects.length))
    cellEl.appendChild(el)
    showHideAdminTools()
}

function upsertProjectRow (project) {
    if (project.authorEmail == state.email) {
        upsertYourProjectRow(project)
    }
    upsertAllProjectRow(project)
}

function upsertVoteRow (vote) {
    let project = state.projects.find(project => project.id == vote.projectId)
    let category = state.categories.find(category => category.id == vote.categoryId)

    let myVotesTableEl = document.querySelector("table#my_votes")
    let existingMyVote = myVotesTableEl.querySelector('tr[voteId="'+vote.id+'"]')

    let rowEl = document.createElement("tr")
    rowEl.setAttribute("voteId", vote.id)
    let projectCellEl = document.createElement("td")
    projectCellEl.appendChild(document.createTextNode(project ? project.name : 'REMOVED'))
    let categoryCellEl = document.createElement("td")
    categoryCellEl.appendChild(document.createTextNode(category ? category.name : 'REMOVED'))
    let idCellEl = document.createElement("td")
    idCellEl.appendChild(document.createTextNode(vote.id))

    let removeButtonEl = document.createElement("button")
    removeButtonEl.appendChild(document.createTextNode('Remove'))
    removeButtonEl.onclick = () => deleteVote(vote.id)
    let removeCellEl = document.createElement("td")
    removeCellEl.appendChild(removeButtonEl)
    let editButtonEl = document.createElement("button")
    editButtonEl.appendChild(document.createTextNode('Edit'))
    editButtonEl.onclick = () => {
        let form = document.querySelector("form#new_vote")
        form.elements['projectId'].value = project.id
        form.elements['categoryId'].value = category.id
        form.elements['id'].value = vote.id
        form.querySelector("button").innerText = 'Edit'
    }
    let editCellEl = document.createElement("td")
    editCellEl.appendChild(editButtonEl)

    rowEl.appendChild(projectCellEl)
    rowEl.appendChild(categoryCellEl)
//    rowEl.appendChild(idCellEl)
    rowEl.appendChild(removeCellEl)
    rowEl.appendChild(editCellEl)

    if (existingMyVote) {
        myVotesTableEl.replaceChild(rowEl, existingMyVote)
    } else {
        myVotesTableEl.appendChild(rowEl)
    }
}

function removeOldProjects () {
    let yourProjectsRowEls = Array.from(document.querySelectorAll("#your_projects table tr"))
    let allProjectsRowEls = Array.from(document.querySelectorAll("#all_projects table tr"))

    let yourProjectIds = state.projects
        .filter(project => project.authorEmail == state.email)
        .map(project => project.id)
    for (let rowEl of yourProjectsRowEls) {
        let projectId = rowEl.getAttribute("projectId")
        if (projectId && !yourProjectIds.includes(projectId)) {
            console.log("Removing your row project", projectId)
            rowEl.parentNode.removeChild(rowEl)
        }
    }

    let allProjectIds = state.projects.map(project => project.id)
    for (let rowEl of allProjectsRowEls) {
        let projectId = rowEl.getAttribute("projectId")
        if (projectId && !allProjectIds.includes(projectId)) {
            console.log("Removing all row project", projectId)
            rowEl.parentNode.removeChild(rowEl)
        }
    }
}

function clearRefresh () {
    if (state.refresh) {
        clearTimeout(state.refresh)
        delete state.refresh
        document.querySelector("#not_refresh").style.display = 'block'
    }
}

function startRefresh () {
    if (!state.refresh) {
        state.refresh = setTimeout(getState, 30000 + Math.floor(Math.random() * 10000))
        document.querySelector("#not_refresh").style.display = 'none'
    }
}

function errMsg (err) {
    if (err.msg) {
        return err.msg
    }
    if (err.obj) {
        return JSON.stringify(err.obj)
    }
    if (err.code) {
        return err.code
    }
    return JSON.stringify(err)
}

function setDisableInputs (onOffDisable) {
    for (let button of document.querySelectorAll("button")) {
        button.disabled = onOffDisable
    }
    for (let checkbox of document.querySelectorAll("input[type=checkbox]")) {
        checkbox.disabled = onOffDisable
    }
}

async function updateState (response) {
    clearRefresh()
    console.log("Updating state", response)

    let json = await response.json()
    console.log("Response json", json)
    document.querySelector("#error").textContent = ''
    if (json.err) {
        document.querySelector("#error").textContent = errMsg(json.err)
        setDisableInputs(true)
        state.refresh = setTimeout(googleInit, 30000 + Math.floor(Math.random() * 10000))
    } else {
        setDisableInputs(false)
        startRefresh()

        // state.reqs.shift()
        state.projects = json.data.projects
        state.categories = json.data.categories
        state.votes = json.data.votes
    }

    setCategoriesInProjectsHeader()
    setCategoriesInNewProjectCategoryDropdown()
    state.projects.forEach(upsertProjectRow)
//    state.votes.forEach(upsertVoteRow)
    removeOldProjects()
    // TODO: dropdowns for projects (votes)

    let allProjectsTitle = document.querySelector("#all_projects p")
    allProjectsTitle.innerHTML = allProjectsTitle.innerHTML
        .replace(/All .*Projects/, `All <b>${state.projects.length}</b> Projects`)
    let yourProjectsTitle = document.querySelector("#your_projects p")
    yourProjectsTitle.innerHTML = yourProjectsTitle.innerHTML
        .replace(/Your .*Projects/, `Your <b>${state.projects.filter(p => p.authorEmail == state.email).length}</b> Project(s)`)
}

function sendRequest (path, data = {}, cb = null, method = "POST") {
    // everything MUST be POST (or DELETE) because sending oauth id token in body
    data.id_token = state.id_token
    // https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch
    let req = {
        at: Date.now(),
        url: SERVER_URL_BASE + path,
        options: {
            method: method, // *GET, POST, PUT, DELETE, etc.
            //mode: "cors", // no-cors, cors, *same-origin
            cache: "no-cache", // *default, no-cache, reload, force-cache, only-if-cached
            credentials: "same-origin", // include, *same-origin, omit
            headers: {
                "Content-Type": "application/json",
                // "Content-Type": "application/x-www-form-urlencoded",
            },
            body: JSON.stringify(data)
        }
    }

    // state.reqs.push(req)
    // req = state.reqs[0]
    fetch(req.url, req.options)
        .then(cb || updateState)
        .catch((err) =>
            updateState({
                json: () => {
                    console.log("json response called")
                    return {
                        err: {
                            msg: err
                        }
                    }
                }
            })
        )
}

function test () {
    sendRequest(
        "authtest",
        {},
        response => console.log(JSON.stringify(response.json()))
    )
}

function getState () {
    sendRequest("state")
}

function upsertProject (project) {
    sendRequest(
        "projects",
        {
            name: project.name,
            description: project.description,
            members: project.members,
            slogan: project.slogan,
            categoryId: project.categoryId,
            order: project.order,
            createdAt: project.createdAt,
            id: project.id
        }
    )
}

function deleteProject (id) {
    sendRequest("projects", { id: id }, null, "DELETE")
}

function saveProjectOrder () {
    sendRequest("projects/order", { projectIds: state.projects.map(p => p.id) })

    if (!state.refresh) {
        startRefresh()
//        alert('Started refresh after saving')
    }
}

function dumpVotes () {
    sendRequest("votes/dump")
}

function dumpProjects () {
    sendRequest("projects/dump")
}

function upsertVote (vote) {
    sendRequest(
        "votes",
        {
            projectId: vote.projectId,
            categoryId: vote.categoryId,
            id: vote.id
        }
    )
}

function deleteVote (id) {
    sendRequest("votes", { id: id }, null, "DELETE")
}

function newProjectSubmit (form) {
    if (!form.elements['name'].value) {
        alert('Must have name!')
    }
    else if (!form.elements['members'].value) {
        alert('Must have members!')
    }
    else if (!form.elements['categoryId'].value) {
        alert('Must have category!')
    }
    else {
        upsertProject({
            name: form.elements['name'].value,
            description: form.elements['description'].value,
            members: form.elements['members'].value,
            slogan: form.elements['slogan'].value,
            categoryId: form.elements['categoryId'].value,
            order: form.elements['order'].value,
            createdAt: form.elements['createdAt'].value,
            id: form.elements['id'].value,
        })

        clearNewProject(form)
    }
}

function clearNewProject (form) {
    form.elements['name'].value = ''
    form.elements['description'].value = ''
    form.elements['members'].value = ''
    form.elements['slogan'].value = ''
    form.elements['categoryId'].value = ''
    form.elements['order'].value = '-1'
    form.elements['createdAt'].value = ''
    form.elements['id'].value = ''
    form.querySelector("button").innerText = 'Add'
    form.querySelector("p").innerText = 'New Project:'
}

        </script>
        <style>

#error {
    color: red;
}

#not_refresh {
    color: blue;
    font-weight: bold;
}

table, tr, td, th {
    border: 1px solid black;
    padding: 3px;
}

div.admin_only {
    display: none;
}

span.order_button, div.admin_actions div {
    cursor: pointer;
}

span.order_button:hover, div.admin_actions div:hover {
    color: green;
}

        </style>
    </head>
    <body>
<!--
        <div class="g-signin2" data-onsuccess="onSignIn"></div>
-->

        <div class="no-auth">
            <div>Who are you?</div>
            <div><a href="#" onclick="googleSignIn();">Sign In</a></div>
        </div>

        <div class="yes-auth">
            <div>
                Hello
                <div id="hello-user">
                    <img />
                    <span></span>
                </div>
            </div>
            <div><a href="#" onclick="googleSignOut();">Sign out</a></div>
<!--
            <div><a href="#" onclick="test();">Test</a></div>
-->
            <div></div>
            <div id="error"></div>

            <div id="not_refresh">Not currently refreshing state!!</div>

            <div id="all_projects">
                <p>All Projects (for Voting):</p>
                <table>
                    <tr>
                        <th>Name</th>
                        <th>Description</th>
                        <th>Members</th>
                        <th>Slogan</th>
                        <th>Category</th>
                        <th>--Votes--</th>
                    </tr>
                </table>
            </div>

            <div class="admin_only admin_actions">
                <div onclick="saveProjectOrder()">Save Project Order</div>
                <div onclick="dumpVotes()">Dump Votes</div>
                <div onclick="dumpProjects()">Dump Projects</div>
                <div onclick="clearRefresh()">Stop Refresh</div>
                <div onclick="startRefresh()">Start Refresh</div>
            </div>

<!--
            <div id="my_votes">
                <p>My Votes</p>
                <table>
                    <tr>
                        <th>Project</th>
                        <th>Category</th>
                        <th>Remove</th>
                        <th>Edit</th>
                    </tr>
                </table>
            </div>
-->

            <div id="your_projects">
                <p>Your Projects:</p>
                <table>
                    <tr>
                        <th>Name</th>
                        <th>Description</th>
                        <th>Members</th>
                        <th>Slogan</th>
                        <th>Category</th>
                        <th>Remove</th>
                        <th>Edit</th>
                    </tr>
                </table>
            </div>

            <form id="new_project" onsubmit="return false">
                <input name="order" type="hidden" value="-1" />
                <input name="createdAt" type="hidden" />
                <p>New Project:</p>
                <table>
                    <tr>
                        <th>Name</th>
                        <th>Description</th>
                        <th>Members</th>
                        <th>Slogan</th>
                        <th>Category</th>
                        <th></th>
                        <th></th>
                        <th>Id</th>
                    </tr>
                    <tr>
                        <td><input name="name" /></td>
                        <td><input name="description" /></td>
                        <td><input name="members" /></td>
                        <td><input name="slogan" /></td>
                        <td><select name="categoryId" /></td>
                        <td><button onclick="newProjectSubmit(this.form)">Add</button></td>
                        <td><button onclick="clearNewProject(this.form)">Clear</button></td>
                        <td><input name="id" disabled="true" /></td>
                    </tr>
                </table>
            </form>

        </div>

        <script src="https://apis.google.com/js/platform.js?onload=googleInit" async defer></script>
    </body>
</html>
